document.addEventListener("DOMContentLoaded",function(){(function(){const u=document.querySelector(".app-chat-contacts .sidebar-body"),h=[].slice.call(document.querySelectorAll(".chat-contact-list-item:not(.chat-contact-list-item-title)")),s=document.querySelector(".chat-history-body"),m=document.querySelector(".app-chat-sidebar-left .sidebar-body"),p=document.querySelector(".app-chat-sidebar-right .sidebar-body"),w=[].slice.call(document.querySelectorAll(".form-check-input[name='chat-user-status']")),v=$(".chat-sidebar-left-user-about"),L=document.querySelector(".form-send-message"),n=document.querySelector(".message-input"),f=document.querySelector(".chat-search-input"),b=$(".speech-to-text"),y={active:"avatar-online",offline:"avatar-offline",away:"avatar-away",busy:"avatar-busy"};u&&new PerfectScrollbar(u,{wheelPropagation:!1,suppressScrollX:!0}),s&&new PerfectScrollbar(s,{wheelPropagation:!1,suppressScrollX:!0}),m&&new PerfectScrollbar(m,{wheelPropagation:!1,suppressScrollX:!0}),p&&new PerfectScrollbar(p,{wheelPropagation:!1,suppressScrollX:!0});function S(){s.scrollTo(0,s.scrollHeight)}S(),v.length&&v.maxlength({alwaysShow:!0,warningClass:"label label-success bg-success text-white",limitReachedClass:"label label-danger",separator:"/",validate:!0,threshold:120}),w.forEach(t=>{t.addEventListener("click",e=>{let c=document.querySelector(".chat-sidebar-left-user .avatar"),r=e.currentTarget.value;c.removeAttribute("class"),Helpers._addClass("avatar avatar-xl chat-sidebar-avatar "+y[r],c);let a=document.querySelector(".app-chat-contacts .avatar");a.removeAttribute("class"),Helpers._addClass("flex-shrink-0 avatar "+y[r]+" me-3",a)})}),h.forEach(t=>{t.addEventListener("click",e=>{h.forEach(c=>{c.classList.remove("active")}),e.currentTarget.classList.add("active")})}),f&&f.addEventListener("keyup",t=>{let e=t.currentTarget.value.toLowerCase(),c=0,r=0,a=document.querySelector(".chat-list-item-0"),d=document.querySelector(".contact-list-item-0"),E=[].slice.call(document.querySelectorAll("#chat-list li:not(.chat-contact-list-item-title)")),C=[].slice.call(document.querySelectorAll("#contact-list li:not(.chat-contact-list-item-title)"));g(E,c,e,a),g(C,r,e,d)});function g(t,e,c,r){t.forEach(a=>{let d=a.textContent.toLowerCase();c?-1<d.indexOf(c)?(a.classList.add("d-flex"),a.classList.remove("d-none"),e++):a.classList.add("d-none"):(a.classList.add("d-flex"),a.classList.remove("d-none"),e++)}),e==0?r.classList.remove("d-none"):r.classList.add("d-none")}L.addEventListener("submit",t=>{if(t.preventDefault(),n.value){let e=document.createElement("div");e.className="chat-message-text mt-2",e.innerHTML='<p class="mb-0 text-break">'+n.value+"</p>",document.querySelector("li:last-child .chat-message-wrapper").appendChild(e),n.value="",S()}});let q=document.querySelector(".chat-history-header [data-target='#app-chat-contacts']"),x=document.querySelector(".app-chat-sidebar-left .close-sidebar");if(q.addEventListener("click",t=>{x.removeAttribute("data-overlay")}),b.length){var i=i||webkitSpeechRecognition;if(i!=null){var l=new i,o=!1;b.on("click",function(){const t=$(this);l.onspeechstart=function(){o=!0},o===!1&&l.start(),l.onerror=function(e){o=!1},l.onresult=function(e){t.closest(".form-send-message").find(".message-input").val(e.results[0][0].transcript)},l.onspeechend=function(e){o=!1,l.stop()}})}}})()});
