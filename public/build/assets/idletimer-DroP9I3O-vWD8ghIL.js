/*! Idle Timer - v1.1.1 - 2020-06-25
 * https://github.com/thorst/jquery-idletimer
 * Copyright (c) 2020 Paul Irish; Licensed MIT */(function(r){r.idleTimer=function(t,a){var n;typeof t=="object"?(n=t,t=null):typeof t=="number"&&(n={timeout:t},t=null),a=a||document,n=r.extend({idle:!1,timeout:3e4,events:"mousemove keydown wheel DOMMouseScroll mousewheel mousedown touchstart touchmove MSPointerDown MSPointerMove"},n);var d=r(a),l=d.data("idleTimerObj")||{},u=function(e){var i=r.data(a,"idleTimerObj")||{};i.idle=!i.idle,i.olddate=+new Date;var o=r.Event((i.idle?"idle":"active")+".idleTimer");r(a).trigger(o,[a,r.extend({},i),e])},m=function(e){var i=r.data(a,"idleTimerObj")||{};if(!(e.type==="storage"&&e.originalEvent.key!==i.timerSyncId)&&i.remaining==null){if(e.type==="mousemove"){if(e.pageX===i.pageX&&e.pageY===i.pageY||typeof e.pageX>"u"&&typeof e.pageY>"u")return;var o=+new Date-i.olddate;if(o<200)return}clearTimeout(i.tId),i.idle&&u(e),i.lastActive=+new Date,i.pageX=e.pageX,i.pageY=e.pageY,e.type!=="storage"&&i.timerSyncId&&typeof localStorage<"u"&&localStorage.setItem(i.timerSyncId,i.lastActive),i.tId=setTimeout(u,i.timeout)}},c=function(){var e=r.data(a,"idleTimerObj")||{};e.idle=e.idleBackup,e.olddate=+new Date,e.lastActive=e.olddate,e.remaining=null,clearTimeout(e.tId),e.idle||(e.tId=setTimeout(u,e.timeout))},f=function(){var e=r.data(a,"idleTimerObj")||{};e.remaining==null&&(e.remaining=e.timeout-(+new Date-e.olddate),clearTimeout(e.tId))},g=function(){var e=r.data(a,"idleTimerObj")||{};e.remaining!=null&&(e.idle||(e.tId=setTimeout(u,e.remaining)),e.remaining=null)},s=function(){var e=r.data(a,"idleTimerObj")||{};clearTimeout(e.tId),d.removeData("idleTimerObj"),d.off("._idleTimer")},v=function(){var e=r.data(a,"idleTimerObj")||{};if(e.idle)return 0;if(e.remaining!=null)return e.remaining;var i=e.timeout-(+new Date-e.lastActive);return i<0&&(i=0),i};if(t===null&&typeof l.idle<"u")return c(),d;if(t!==null){if(t!==null&&typeof l.idle>"u")return!1;if(t==="destroy")return s(),d;if(t==="pause")return f(),d;if(t==="resume")return g(),d;if(t==="reset")return c(),d;if(t==="getRemainingTime")return v();if(t==="getElapsedTime")return+new Date-l.olddate;if(t==="getLastActiveTime")return l.lastActive;if(t==="isIdle")return l.idle}return d.on((n.events+" ").split(" ").join("._idleTimer ").trim(),function(e){m(e)}),n.timerSyncId&&r(window).on("storage",m),l=r.extend({},{olddate:+new Date,lastActive:+new Date,idle:n.idle,idleBackup:n.idle,timeout:n.timeout,remaining:null,timerSyncId:n.timerSyncId,tId:null,pageX:null,pageY:null}),l.idle||(l.tId=setTimeout(u,l.timeout)),r.data(a,"idleTimerObj",l),d},r.fn.idleTimer=function(t){return this[0]?r.idleTimer(t,this[0]):this}})(jQuery);
